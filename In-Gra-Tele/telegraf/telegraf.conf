
# Agent configuration
[agent]
  interval = "60s"                 # Data collection interval
  round_interval = true            # Round collection interval
  metric_batch_size = 1000         # Max number of metrics to send in a single batch
  metric_buffer_limit = 10000      # Max number of metrics to keep in memory
  collection_jitter = "0s"         # Add random delays to collection to avoid load spikes
  flush_interval = "10s"           # How often to flush data to output plugins
  flush_jitter = "0s"              # Add random delays to flushing to avoid load spikes
  precision = ""                   # Timestamp precision for metrics
  hostname = "docker-telegraf"     # Override default hostname
  omit_hostname = false            # Include hostname in metrics

[[inputs.mqtt_consumer]]
  servers = ["tcp://emqx:1883"]       # URL del broker MQTT
  topics = [
    "sensor/+/10DOF",     
    "sensor/+/GPS"        
  ]
  qos = 0
  username = "user1"                  # Usuario del broker MQTT
  password = "clave123"               # Contrase√±a del broker MQTT
  name_override = "sensor_data"
  tag_keys = ["agent_id"]

  # Formato de datos (JSON en este caso)
  data_format = "json"
  


# Output plugin configuration for InfluxDB
[[outputs.influxdb_v2]]
  urls = ["http://influxdb:8086"]  # InfluxDB server URL
  timeout = "5s"                   # Timeout for HTTP requests
  token="hduhwW9XxZBtC9b9gXJCj8X8yPV4T345X9On4JgCHQAonMHfDz9odoh4Y-MTGJ4YFv28ViUxbTQG2OhjyguDLw=="
  organization="UCLM"
  bucket="datos"

# Input plugin to collect Nginx metrics
[[inputs.nginx]]
  urls = ["http://nginx/nginx_status"]  # URL for Nginx status page
