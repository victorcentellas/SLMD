[agent]
  interval = "60s"                 # Data collection interval
  round_interval = true            # Round collection interval
  metric_batch_size = 1000         # Max number of metrics to send in a single batch
  metric_buffer_limit = 10000      # Max number of metrics to keep in memory
  collection_jitter = "0s"         # Add random delays to collection to avoid load spikes
  flush_interval = "10s"           # How often to flush data to output plugins
  flush_jitter = "0s"              # Add random delays to flushing to avoid load spikes
  precision = ""                   # Timestamp precision for metrics
  hostname = "docker-telegraf"     # Override default hostname
  omit_hostname = false            # Include hostname in metrics

[[inputs.mqtt_consumer]]
  servers = ["tcp://192.168.192.154:1883"]
  topics = ["Si/+/10DOF", "Si/+/GPS"]
  qos = 0
  connection_timeout = "30s"
  username = "root"
  password = "tfg-2425"
  client_id = "telegraf_mqtt_client_1"  # Aquí defines el client_id, puedes poner un valor único
  data_format = "json"
  json_string_fields = ["id", "sensor", "tipo", "timestamp"]
  json_time_key = "timestamp"
  json_time_format = "2006-01-02 15:04:05"



# Output plugin configuration for InfluxDB
[[outputs.influxdb_v2]]
  urls = ["http://192.168.192.156:8086"]  # InfluxDB server URL
  timeout = "5s"                   # Timeout for HTTP requests
  token="hQuGGvtteZvXhCdiTE_CcG1MCIOFe_D4o8HJUWonWKhOx2jyUqUsckGTJKeboN0hK83M1MWpjS-fvgyAWDw1hA=="
  organization="UCLM"
  bucket="datos"

# Input plugin to collect Nginx metrics
[[inputs.nginx]]
  urls = ["http://nginx/nginx_status"]  # URL for Nginx status page
